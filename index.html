<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Pratik Cloud — CLI Web Client</title>
<style>
  :root{
    --bg:#0b1020;
    --panel:#071126;
    --muted:#98a0b3;
    --accent1:#7c5cff;
    --accent2:#00e6a8;
    --accent3:#ffd166;
    --glass: rgba(255,255,255,0.04);
  }
  html,body{height:100%;margin:0;font-family:ui-monospace, SFMono-Regular, Menlo, "Roboto Mono", monospace;background:linear-gradient(180deg,#041021 0%, #071126 70%);color:#e6eef8}
  .wrap{max-width:980px;margin:28px auto;padding:22px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));box-shadow:0 8px 40px rgba(3,6,23,0.7);border:1px solid rgba(255,255,255,0.03)}
  header{display:flex;align-items:center;gap:16px;margin-bottom:14px}
  .logo{
    width:60px;height:60px;border-radius:10px;display:flex;align-items:center;justify-content:center;
    background:linear-gradient(135deg,var(--accent1),#6fd3ff);font-weight:700;color:#061022;box-shadow:0 6px 18px rgba(124,92,255,0.14);font-size:24px;
  }
  h1{font-size:18px;margin:0}
  p.sub{margin:0;color:var(--muted);font-size:13px}
  .toolbar{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap}
  .btn{
    background:var(--glass);border:1px solid rgba(255,255,255,0.03);padding:8px 12px;border-radius:8px;color:var(--muted);
    cursor:pointer;font-size:13px;transition:all .18s;display:inline-flex;gap:8px;align-items:center;
  }
  .btn:hover{transform:translateY(-3px);box-shadow:0 8px 30px rgba(2,6,23,0.5)}
  .btn.primary{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#061022;font-weight:700;border:none}
  .controls{display:flex;gap:8px;align-items:center;margin-top:14px;flex-wrap:wrap}
  .url-input{flex:1;background:#061025;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);color:#dff3ea;min-width:300px}
  .model-select{background:#061025;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.03);color:#dff3ea}
  .small{font-size:12px;color:var(--muted)}
  /* Terminal */
  .terminal{
    margin-top:18px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.008));border-radius:10px;padding:18px;height:520px;overflow:auto;border:1px solid rgba(255,255,255,0.02);
  }
  .line{display:block;margin:8px 0;white-space:pre-wrap;word-break:break-word}
  .meta{color:var(--muted);font-size:12px;margin-bottom:6px}
  .user{color:var(--accent3);background:linear-gradient(90deg, rgba(255,209,102,0.06), transparent);padding:10px;border-radius:8px;border-left:4px solid #ffb84d;display:inline-block;max-width:80%}
  .ai{color:var(--accent2);background:linear-gradient(90deg, rgba(0,230,168,0.03), transparent);padding:10px;border-radius:8px;border-left:4px solid #00e6a8;display:inline-block;max-width:80%}
  .sys{color:var(--muted);font-size:13px}
  .input-row{display:flex;gap:12px;align-items:center;padding-top:12px}
  .prompt{background:#020617;padding:12px;border-radius:8px;border:1px solid rgba(255,255,255,0.02);flex:1;color:#dff3ea}
  .send{background:linear-gradient(90deg,var(--accent1),var(--accent2));padding:12px 16px;border-radius:8px;border:none;color:#041022;font-weight:700;cursor:pointer;white-space:nowrap}
  .send:disabled{opacity:0.5;cursor:not-allowed}
  .badge{display:inline-block;padding:4px 8px;border-radius:999px;font-size:12px;background:rgba(255,255,255,0.03);color:var(--muted)}
  footer.small{margin-top:12px;color:var(--muted);font-size:12px}
  /* nice scroll */
  .terminal::-webkit-scrollbar{height:10px;width:10px}
  .terminal::-webkit-scrollbar-track{background:rgba(128,128,128,0.1);border-radius:3px}
  .terminal::-webkit-scrollbar-thumb{background:linear-gradient(180deg,var(--accent1),var(--accent2));border-radius:10px}
  /* responsive */
  @media (max-width:640px){.wrap{margin:12px;padding:14px}.terminal{height:420px}.controls{flex-direction:column;align-items:stretch}.url-input{min-width:100%}}
</style>
</head>
<body>
  <div class="wrap" role="application" aria-label="Pratik Cloud CLI">
    <header>
      <div class="logo">◉◡◉</div>
      <div>
        <h1>Pratik Cloud — CLI Web Client</h1>
        <p class="sub">Terminal-like interface for your deployed AI chatbot</p>
        <div class="toolbar">
          <button id="test-connection" class="btn primary" title="Test connection to your API">Test Connection</button>
          <button id="open-url" class="btn" title="Open your Render URL">Open API URL</button>
          <button id="clear-chat" class="btn" title="Clear messages">Clear Chat</button>
        </div>
      </div>
    </header>

    <div class="controls">
      <input id="endpoint" class="url-input" type="text" value="https://alex-072-cli.onrender.com/chat" placeholder="Your Render API endpoint" />
      <select id="model-select" class="model-select">
        <option value="gpt-oss:120b-cloud">GPT-OSS 120B</option>
        <option value="gpt-oss:20b-cloud">GPT-OSS 20B</option>
        <option value="deepseek-v3.1:671b-cloud">DeepSeek V3.1 671B</option>
        <option value="qwen3-coder:480b-cloud">Qwen3 Coder 480B</option>
      </select>
      <div class="small">Select model and update endpoint URL</div>
    </div>

    <div class="terminal" id="terminal" aria-live="polite"></div>

    <div class="input-row" role="region">
      <input id="message" class="prompt" placeholder="Type your message and press Enter..." />
      <button id="send" class="send">Send</button>
    </div>

    <footer class="small">Powered by Pratik Cloud AI • Status: <span id="status" class="badge">Ready</span></footer>
  </div>

<script>
(function(){
  const terminal = document.getElementById('terminal');
  const messageInput = document.getElementById('message');
  const sendBtn = document.getElementById('send');
  const endpointEl = document.getElementById('endpoint');
  const modelSelect = document.getElementById('model-select');
  const clearBtn = document.getElementById('clear-chat');
  const openBtn = document.getElementById('open-url');
  const testBtn = document.getElementById('test-connection');
  const statusEl = document.getElementById('status');

  function appendLine(html) {
    const div = document.createElement('div');
    div.className = 'line';
    div.innerHTML = html;
    terminal.appendChild(div);
    terminal.scrollTop = terminal.scrollHeight;
    return div;
  }

  function meta(msg) {
    appendLine('<div class="meta">['+ new Date().toLocaleTimeString() +'] '+ msg +'</div>');
  }

  function pushUser(text) {
    appendLine('<div class="user"><strong>You:</strong> '+escapeHtml(text)+'</div>');
  }

  function pushAI(text) {
    appendLine('<div class="ai"><strong>Pratik:</strong> '+escapeHtml(text)+'</div>');
  }

  function escapeHtml(s){
    return String(s).replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;');
  }

  function setStatus(text, type='info'){
    statusEl.textContent = text;
    statusEl.style.background = type === 'error' ? 'rgba(255,82,82,0.1)' : 
                                 type === 'success' ? 'rgba(0,230,168,0.1)' : 
                                 'rgba(255,255,255,0.03)';
  }

  function typeWriter(targetEl, text, speed=4){
    let i=0;
    targetEl.innerHTML = '';
    return new Promise(res=>{
      function step(){
        if(i<text.length){
          targetEl.innerHTML += escapeHtml(text[i++]);
          terminal.scrollTop = terminal.scrollHeight;
          setTimeout(step, speed);
        } else res();
      }
      step();
    });
  }

  async function sendMessage(text){
    if(!text) return;
    const url = endpointEl.value.trim();
    const model = modelSelect.value;
    
    pushUser(text);
    sendBtn.disabled = true;
    messageInput.disabled = true;
    setStatus('Sending...', 'info');
    
    try {
      const fetchUrl = url + '?message=' + encodeURIComponent(